import { PLUGIN, UI } from "@common/networkSides";

export const PLUGIN_CHANNEL = PLUGIN.channelBuilder()
	.emitsTo(UI, (message) => {
		figma.ui.postMessage(message);
	})
	.receivesFrom(UI, (next) => {
		const listener: MessageEventHandler = (event) => next(event);
		figma.ui.on("message", listener);
		return () => figma.ui.off("message", listener);
	})
	.startListening();

PLUGIN_CHANNEL.registerMessageHandler("ping", () => {
	return "pong";
});
